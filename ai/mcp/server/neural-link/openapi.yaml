openapi: 3.0.0
info:
  title: Neo.mjs Neural Link MCP Server
  version: 1.0.0
paths:
  /component/property/get:
    post:
      summary: Get Component Property
      operationId: get_component_property
      x-pass-as-object: true
      description: Retrieves a property from a component by its ID.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetComponentPropertyRequest'
      responses:
        '200':
          description: The value of the property
          content:
            application/json:
              schema:
                description: The property value
        '400':
          description: Invalid request body
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /component/tree:
    post:
      summary: Get Component Tree
      operationId: get_component_tree
      x-pass-as-object: true
      description: Retrieves the full component tree of the application.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetComponentTreeRequest'
      responses:
        '200':
          description: The component tree structure
          content:
            application/json:
              schema:
                type: object
                description: The component tree
        '400':
          description: Invalid request body
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /component/vdom/get:
    post:
      summary: Get Component VDOM Tree
      operationId: get_vdom_tree
      x-pass-as-object: true
      description: Retrieves the VDOM tree of a component.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetComponentTreeRequest'
      responses:
        '200':
          description: The VDOM tree structure
          content:
            application/json:
              schema:
                type: object
        '400':
          description: Invalid request body
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /component/vnode/get:
    post:
      summary: Get Component VNode Tree
      operationId: get_vnode_tree
      x-pass-as-object: true
      description: Retrieves the VNode tree of a component.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetComponentTreeRequest'
      responses:
        '200':
          description: The VNode tree structure
          content:
            application/json:
              schema:
                type: object
        '400':
          description: Invalid request body
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /drag/state:
    post:
      summary: Get Drag State
      operationId: get_drag_state
      x-pass-as-object: true
      description: Retrieves the state of the DragCoordinator.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                sessionId:
                  type: string
                  description: Target App Worker Session ID
      responses:
        '200':
          description: Drag Coordinator State
          content:
            application/json:
              schema:
                type: object

  /page/reload:
    post:
      summary: Reload Page
      operationId: reload_page
      x-pass-as-object: true
      description: Reloads the application page.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReloadPageRequest'
      responses:
        '200':
          description: Page reloaded successfully
        '400':
          description: Invalid request body
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /worker/topology:
    post:
      summary: Get Worker Topology
      operationId: get_worker_topology
      description: Retrieves the topology of all connected App Workers.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties: {}
      responses:
        '200':
          description: List of App Workers
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    sessionId:
                      type: string
                    appWorkerId:
                      type: string
                    isSharedWorker:
                      type: boolean
                    userAgent:
                      type: string
                    environment:
                      type: string
                    connectedAt:
                      type: number

  /window/topology:
    post:
      summary: Get Window Topology
      operationId: get_window_topology
      description: Retrieves the topology of all connected windows.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties: {}
      responses:
        '200':
          description: List of windows
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: string
                    appName:
                      type: string
                    innerRect:
                      type: object
                    outerRect:
                      type: object
                    chrome:
                      type: object

  /component/property/set:
    post:
      summary: Set Component Property
      operationId: set_component_property
      x-pass-as-object: true
      description: Sets a property on a component by its ID.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SetComponentPropertyRequest'
      responses:
        '200':
          description: Property set successfully
        '400':
          description: Invalid request body
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

components:
  schemas:
    GetComponentPropertyRequest:
      type: object
      required:
        - id
        - property
      properties:
        id:
          type: string
          description: The component ID
        property:
          type: string
          description: The property name to retrieve
        windowId:
          type: string
          description: The target window ID

    GetComponentTreeRequest:
      type: object
      properties:
        rootId:
          type: string
          description: Optional root component ID. Defaults to the App's MainView if available.
        depth:
          type: integer
          description: Depth limit. 1=Self, 2=Self+Children, -1=Infinite.
        windowId:
          type: string
          description: The target window ID

    ReloadPageRequest:
      type: object
      properties:
        windowId:
          type: string
          description: The target window ID

    SetComponentPropertyRequest:
      type: object
      required:
        - id
        - property
        - value
      properties:
        id:
          type: string
          description: The component ID
        property:
          type: string
          description: The property name to set
        value:
          description: The value to set
        windowId:
          type: string
          description: The target window ID

    ErrorResponse:
      type: object
      properties:
        error:
          type: string
          description: Error message
